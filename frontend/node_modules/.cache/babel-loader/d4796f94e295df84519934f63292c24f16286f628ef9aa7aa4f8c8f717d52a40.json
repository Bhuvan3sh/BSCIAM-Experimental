{"ast":null,"code":"import React,{useState}from'react';import{Download,FileText,Image as ImageIcon,File,Key,Trash2,Edit}from'lucide-react';import{decryptFile,saveDecryptedFile}from'../../utils/cryptoUtils';import{useWallet}from'../../context/WalletContext';import{fileApi}from'../../services/fileApi';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FileList=_ref=>{let{files,onDelete,onModify}=_ref;const[decryptingFile,setDecryptingFile]=useState(null);const[decryptionKey,setDecryptionKey]=useState('');const[activeFile,setActiveFile]=useState(null);const[error,setError]=useState(null);const{validateEncryptionKey,recordActivity,wallet}=useWallet();const getFileIcon=fileType=>{if(fileType==='application/pdf'){return/*#__PURE__*/_jsx(FileText,{className:\"w-5 h-5 text-red-500\"});}if(fileType.startsWith('image/')){return/*#__PURE__*/_jsx(ImageIcon,{className:\"w-5 h-5 text-blue-500\"});}if(fileType==='application/vnd.openxmlformats-officedocument.presentationml.presentation'){return/*#__PURE__*/_jsx(FileText,{className:\"w-5 h-5 text-orange-500\"});// PPTX\n}if(fileType==='application/vnd.openxmlformats-officedocument.wordprocessingml.document'){return/*#__PURE__*/_jsx(FileText,{className:\"w-5 h-5 text-blue-600\"});// DOCX\n}if(fileType==='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'||fileType==='application/vnd.ms-excel'){return/*#__PURE__*/_jsx(FileText,{className:\"w-5 h-5 text-green-500\"});// XLSX/XLS\n}if(fileType==='text/plain'){return/*#__PURE__*/_jsx(FileText,{className:\"w-5 h-5 text-gray-500\"});// TXT\n}return/*#__PURE__*/_jsx(File,{className:\"w-5 h-5\"});};const formatFileSize=bytes=>{if(bytes===0)return'0 Bytes';const k=1024;const sizes=['Bytes','KB','MB','GB'];const i=Math.floor(Math.log(bytes)/Math.log(k));return parseFloat((bytes/Math.pow(k,i)).toFixed(2))+' '+sizes[i];};const handleDownload=async file=>{setActiveFile(file.id);setError(null);};const confirmDownload=async()=>{if(!activeFile||!decryptionKey){setError('Please enter an encryption key');return;}try{if(!validateEncryptionKey(decryptionKey)){setError('Invalid encryption key.');return;}setDecryptingFile(activeFile);const file=files.find(f=>f.id===activeFile);if(!file)throw new Error('File not found');if(!wallet.account){throw new Error('Wallet not connected');}// Fetch encrypted data from server\nconst{encryptedData}=await fileApi.getEncryptedFile(file.id,wallet.account);// Decrypt the file on client side\nconst decryptedBlob=await decryptFile({encryptedData,metadata:file.metadata},decryptionKey);// Save the decrypted file\nsaveDecryptedFile(decryptedBlob,file.name);try{recordActivity('download',file.name);}catch(_unused){}// Reset state\nsetDecryptionKey('');setActiveFile(null);setError(null);}catch(err){console.error('Download failed:',err);setError('Failed to decrypt file. Please check your encryption key.');}finally{setDecryptingFile(null);}};const cancelDownload=()=>{setActiveFile(null);setDecryptionKey('');setError(null);};if(files.length===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 bg-dark-700 rounded-lg border border-dark-600\",children:[/*#__PURE__*/_jsx(File,{className:\"mx-auto h-12 w-12 text-dark-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-white\",children:\"No files\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-dark-300\",children:\"Get started by uploading a new file.\"})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"bg-dark-800 shadow overflow-hidden sm:rounded-md border border-dark-700 glass fade-in\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-dark-700\",children:files.map(file=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-4 sm:px-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:getFileIcon(file.type)}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-primary-400 truncate\",children:file.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-dark-300\",children:[/*#__PURE__*/_jsx(\"span\",{children:formatFileSize(file.size)}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-1\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{children:new Date(file.uploadedAt).toLocaleDateString()})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-2 flex-shrink-0 flex space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>handleDownload(file),disabled:!!decryptingFile,className:\"btn-primary text-xs px-3 py-1.5 \".concat(decryptingFile?'opacity-50 cursor-not-allowed':''),children:[/*#__PURE__*/_jsx(Download,{className:\"w-3 h-3 mr-1\"}),\"Download\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>onModify(file.id),disabled:!!decryptingFile,className:\"btn-primary text-xs px-3 py-1.5\",children:[/*#__PURE__*/_jsx(Edit,{className:\"w-3 h-3 mr-1\"}),\"Modify\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:async()=>{// Ask for key before deletion and validate\nconst key=window.prompt('Enter your encryption key to confirm deletion:')||'';if(!key||!validateEncryptionKey(key)){setError('Deletion cancelled: invalid encryption key.');return;}await onDelete(file.id);},disabled:!!decryptingFile,className:\"btn-secondary text-xs px-3 py-1.5\",children:[/*#__PURE__*/_jsx(Trash2,{className:\"w-3 h-3 mr-1\"}),\"Delete\"]})]})]}),activeFile===file.id&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-dark-700 rounded-md border border-dark-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2 text-sm font-medium text-white\",children:[/*#__PURE__*/_jsx(Key,{className:\"inline w-4 h-4 mr-1\"}),\"Enter encryption key for \\\"\",file.name,\"\\\"\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"input flex-1 min-w-0\",placeholder:\"Enter encryption key\",value:decryptionKey,onChange:e=>setDecryptionKey(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:confirmDownload,disabled:!decryptionKey||decryptingFile===file.id,className:\"btn-primary \".concat(!decryptionKey||decryptingFile===file.id?'opacity-50 cursor-not-allowed':''),children:decryptingFile===file.id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),\"Decrypting...\"]}):'Confirm'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:cancelDownload,disabled:!!decryptingFile,className:\"btn-secondary\",children:\"Cancel\"})]}),error&&activeFile===file.id&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-red-400\",children:error})]})]})},file.id))})});};export default FileList;","map":{"version":3,"names":["React","useState","Download","FileText","Image","ImageIcon","File","Key","Trash2","Edit","decryptFile","saveDecryptedFile","useWallet","fileApi","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FileList","_ref","files","onDelete","onModify","decryptingFile","setDecryptingFile","decryptionKey","setDecryptionKey","activeFile","setActiveFile","error","setError","validateEncryptionKey","recordActivity","wallet","getFileIcon","fileType","className","startsWith","formatFileSize","bytes","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed","handleDownload","file","id","confirmDownload","find","f","Error","account","encryptedData","getEncryptedFile","decryptedBlob","metadata","name","_unused","err","console","cancelDownload","length","children","map","type","size","Date","uploadedAt","toLocaleDateString","onClick","disabled","concat","key","window","prompt","placeholder","value","onChange","e","target","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d"],"sources":["F:/Final Year Project/Project Implementation/BSCIAM-Experimental/frontend/src/components/files/FileList.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Download, FileText, Image as ImageIcon, File, Key, Trash2, Edit } from 'lucide-react';\nimport { decryptFile, saveDecryptedFile } from '../../utils/cryptoUtils';\nimport { StoredFile } from '../../types';\nimport { useWallet } from '../../context/WalletContext';\nimport { fileApi } from '../../services/fileApi';\n\ninterface FileListProps {\n  files: StoredFile[];\n  onDelete: (fileId: string) => Promise<void>;\n  onModify: (fileId: string) => void;\n}\n\nconst FileList: React.FC<FileListProps> = ({ files, onDelete, onModify }) => {\n  const [decryptingFile, setDecryptingFile] = useState<string | null>(null);\n  const [decryptionKey, setDecryptionKey] = useState('');\n  const [activeFile, setActiveFile] = useState<string | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const { validateEncryptionKey, recordActivity, wallet } = useWallet();\n\n  const getFileIcon = (fileType: string) => {\n    if (fileType === 'application/pdf') {\n      return <FileText className=\"w-5 h-5 text-red-500\" />;\n    }\n    \n    if (fileType.startsWith('image/')) {\n      return <ImageIcon className=\"w-5 h-5 text-blue-500\" />;\n    }\n    \n    if (fileType === 'application/vnd.openxmlformats-officedocument.presentationml.presentation') {\n      return <FileText className=\"w-5 h-5 text-orange-500\" />; // PPTX\n    }\n    \n    if (fileType === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {\n      return <FileText className=\"w-5 h-5 text-blue-600\" />; // DOCX\n    }\n    \n    if (fileType === 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' || \n        fileType === 'application/vnd.ms-excel') {\n      return <FileText className=\"w-5 h-5 text-green-500\" />; // XLSX/XLS\n    }\n    \n    if (fileType === 'text/plain') {\n      return <FileText className=\"w-5 h-5 text-gray-500\" />; // TXT\n    }\n    \n    return <File className=\"w-5 h-5\" />;\n  };\n\n  const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const handleDownload = async (file: StoredFile) => {\n    setActiveFile(file.id);\n    setError(null);\n  };\n\n  const confirmDownload = async () => {\n    if (!activeFile || !decryptionKey) {\n      setError('Please enter an encryption key');\n      return;\n    }\n\n    try {\n      if (!validateEncryptionKey(decryptionKey)) {\n        setError('Invalid encryption key.');\n        return;\n      }\n      setDecryptingFile(activeFile);\n      \n      const file = files.find(f => f.id === activeFile);\n      if (!file) throw new Error('File not found');\n\n      if (!wallet.account) {\n        throw new Error('Wallet not connected');\n      }\n\n      // Fetch encrypted data from server\n      const { encryptedData } = await fileApi.getEncryptedFile(file.id, wallet.account);\n      \n      // Decrypt the file on client side\n      const decryptedBlob = await decryptFile(\n        { encryptedData, metadata: file.metadata },\n        decryptionKey\n      );\n      \n      // Save the decrypted file\n      saveDecryptedFile(decryptedBlob, file.name);\n\n      try { recordActivity('download', file.name); } catch {}\n      \n      // Reset state\n      setDecryptionKey('');\n      setActiveFile(null);\n      setError(null);\n    } catch (err) {\n      console.error('Download failed:', err);\n      setError('Failed to decrypt file. Please check your encryption key.');\n    } finally {\n      setDecryptingFile(null);\n    }\n  };\n\n  const cancelDownload = () => {\n    setActiveFile(null);\n    setDecryptionKey('');\n    setError(null);\n  };\n\n  if (files.length === 0) {\n    return (\n      <div className=\"text-center py-12 bg-dark-700 rounded-lg border border-dark-600\">\n        <File className=\"mx-auto h-12 w-12 text-dark-400\" />\n        <h3 className=\"mt-2 text-sm font-medium text-white\">No files</h3>\n        <p className=\"mt-1 text-sm text-dark-300\">\n          Get started by uploading a new file.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-dark-800 shadow overflow-hidden sm:rounded-md border border-dark-700 glass fade-in\">\n      <ul className=\"divide-y divide-dark-700\">\n        {files.map((file) => (\n          <li key={file.id}>\n            <div className=\"px-4 py-4 sm:px-6\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                  <div className=\"flex-shrink-0\">\n                    {getFileIcon(file.type)}\n                  </div>\n                  <div className=\"ml-4\">\n                    <div className=\"text-sm font-medium text-primary-400 truncate\">\n                      {file.name}\n                    </div>\n                    <div className=\"flex items-center text-sm text-dark-300\">\n                      <span>{formatFileSize(file.size)}</span>\n                      <span className=\"mx-1\">â€¢</span>\n                      <span>{new Date(file.uploadedAt).toLocaleDateString()}</span>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"ml-2 flex-shrink-0 flex space-x-2\">\n                  <button\n                    type=\"button\"\n                    onClick={() => handleDownload(file)}\n                    disabled={!!decryptingFile}\n                    className={`btn-primary text-xs px-3 py-1.5 ${decryptingFile ? 'opacity-50 cursor-not-allowed' : ''}`}\n                  >\n                    <Download className=\"w-3 h-3 mr-1\" />\n                    Download\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => onModify(file.id)}\n                    disabled={!!decryptingFile}\n                    className=\"btn-primary text-xs px-3 py-1.5\"\n                  >\n                    <Edit className=\"w-3 h-3 mr-1\" />\n                    Modify\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={async () => {\n                      // Ask for key before deletion and validate\n                      const key = window.prompt('Enter your encryption key to confirm deletion:') || '';\n                      if (!key || !validateEncryptionKey(key)) {\n                        setError('Deletion cancelled: invalid encryption key.');\n                        return;\n                      }\n                      await onDelete(file.id);\n                    }}\n                    disabled={!!decryptingFile}\n                    className=\"btn-secondary text-xs px-3 py-1.5\"\n                  >\n                    <Trash2 className=\"w-3 h-3 mr-1\" />\n                    Delete\n                  </button>\n                </div>\n              </div>\n\n              {activeFile === file.id && (\n                <div className=\"mt-4 p-4 bg-dark-700 rounded-md border border-dark-600\">\n                  <div className=\"mb-2 text-sm font-medium text-white\">\n                    <Key className=\"inline w-4 h-4 mr-1\" />\n                    Enter encryption key for \"{file.name}\"\n                  </div>\n                  <div className=\"flex space-x-2\">\n                    <input\n                      type=\"password\"\n                      className=\"input flex-1 min-w-0\"\n                      placeholder=\"Enter encryption key\"\n                      value={decryptionKey}\n                      onChange={(e) => setDecryptionKey(e.target.value)}\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={confirmDownload}\n                      disabled={!decryptionKey || decryptingFile === file.id}\n                      className={`btn-primary ${(!decryptionKey || decryptingFile === file.id) ? 'opacity-50 cursor-not-allowed' : ''}`}\n                    >\n                      {decryptingFile === file.id ? (\n                        <>\n                          <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                          </svg>\n                          Decrypting...\n                        </>\n                      ) : (\n                        'Confirm'\n                      )}\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={cancelDownload}\n                      disabled={!!decryptingFile}\n                      className=\"btn-secondary\"\n                    >\n                      Cancel\n                    </button>\n                  </div>\n                  {error && activeFile === file.id && (\n                    <p className=\"mt-2 text-sm text-red-400\">{error}</p>\n                  )}\n                </div>\n              )}\n            </div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default FileList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}