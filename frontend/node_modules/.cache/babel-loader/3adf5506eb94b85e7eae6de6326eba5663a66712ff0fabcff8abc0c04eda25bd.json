{"ast":null,"code":"import React,{useState,useRef}from'react';import{Edit,X,FileText,Image as ImageIcon,File,Copy,Check}from'lucide-react';import{encryptFile}from'../../utils/cryptoUtils';import{useWallet}from'../../context/WalletContext';import{toast}from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FileModify=_ref=>{let{file,onModify,onCancel,isModifying}=_ref;const[selectedFile,setSelectedFile]=useState(null);const[encryptionKey,setEncryptionKey]=useState('');const[isEncrypting,setIsEncrypting]=useState(false);const[error,setError]=useState(null);const[showKeyWarning,setShowKeyWarning]=useState(false);const[isKeyValid,setIsKeyValid]=useState(null);const[isCopied,setIsCopied]=useState(false);const fileInputRef=useRef(null);const keyInputRef=useRef(null);const{getEncryptionKey,validateEncryptionKey:validateKey}=useWallet();// Helper function to convert MIME type to user-friendly name\nconst getFileTypeName=mimeType=>{var _mimeType$split$pop;if(mimeType==='application/pdf')return'PDF';if(mimeType.startsWith('image/')){const ext=mimeType.split('/')[1].toUpperCase();return ext==='JPEG'?'JPG':ext;}if(mimeType==='application/vnd.openxmlformats-officedocument.presentationml.presentation')return'PPTX';if(mimeType==='application/vnd.openxmlformats-officedocument.wordprocessingml.document')return'DOCX';if(mimeType==='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet')return'XLSX';if(mimeType==='application/vnd.ms-excel')return'XLS';if(mimeType==='text/plain')return'TXT';// Extract extension from MIME type or return a simplified version\nreturn((_mimeType$split$pop=mimeType.split('/').pop())===null||_mimeType$split$pop===void 0?void 0:_mimeType$split$pop.toUpperCase())||'File';};// Local encryption key validation function\nconst validateEncryptionKey=key=>{if(!key)return false;// Require exact match to stored key; keys are 32-byte hex (64 chars)\nreturn validateKey?validateKey(key):false;};const handleFileChange=e=>{var _e$target$files;const newFile=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(!newFile)return;// Validate file name matches the existing file\nif(newFile.name!==file.name){setError(\"File name must match the existing file. Expected: \".concat(file.name,\", Got: \").concat(newFile.name));setSelectedFile(null);if(fileInputRef.current){fileInputRef.current.value='';}return;}// Validate file type matches the existing file\nif(newFile.type!==file.type){setError(\"File type must match the existing file. Expected: \".concat(file.type,\", Got: \").concat(newFile.type));setSelectedFile(null);if(fileInputRef.current){fileInputRef.current.value='';}return;}// Allow PDF, images, Office documents, and text files\nconst validTypes=['application/pdf','image/jpeg','image/png','image/gif','application/vnd.openxmlformats-officedocument.presentationml.presentation',// PPTX\n'application/vnd.openxmlformats-officedocument.wordprocessingml.document',// DOCX\n'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',// XLSX\n'application/vnd.ms-excel',// XLS\n'text/plain'// TXT\n];if(!validTypes.includes(newFile.type)){setError('Only PDF, images, Office documents (PPTX, DOCX, XLSX), and text files are allowed');setSelectedFile(null);if(fileInputRef.current){fileInputRef.current.value='';}return;}setSelectedFile(newFile);setError(null);};const handleEncryptionKeyChange=e=>{const key=e.target.value;setEncryptionKey(key);setShowKeyWarning(key.length>0);// Validate key format (if needed)\nif(key.length>0){const isValid=validateEncryptionKey?validateEncryptionKey(key):false;setIsKeyValid(isValid);}else{setIsKeyValid(null);}};const copyToClipboard=async text=>{try{await navigator.clipboard.writeText(text);setIsCopied(true);toast.success('Encryption key copied to clipboard!');setTimeout(()=>setIsCopied(false),2000);}catch(err){console.error('Failed to copy text:',err);toast.error('Failed to copy key');}};const handleSubmit=async e=>{e.preventDefault();console.log('Modify submit button clicked');if(!selectedFile){const errorMsg='Please select a file to replace the existing one';console.error(errorMsg);setError(errorMsg);return;}if(!encryptionKey){const errorMsg='Please enter your encryption key';console.error(errorMsg);setError(errorMsg);return;}// Validate encryption key before proceeding\nif(!validateEncryptionKey(encryptionKey)){const errorMsg='Invalid encryption key. It must match your registered key.';console.error(errorMsg);setError(errorMsg);return;}// Validate file name matches\nif(selectedFile.name!==file.name){const errorMsg=\"File name must match the existing file. Expected: \".concat(file.name,\", Got: \").concat(selectedFile.name);console.error(errorMsg);setError(errorMsg);return;}// Validate file type matches\nif(selectedFile.type!==file.type){const errorMsg=\"File type must match the existing file. Expected: \".concat(file.type,\", Got: \").concat(selectedFile.type);console.error(errorMsg);setError(errorMsg);return;}try{var _keyInputRef$current;console.log('Starting file encryption for modification...');setIsEncrypting(true);setError(null);// Get or use the provided encryption key\nconst key=(((_keyInputRef$current=keyInputRef.current)===null||_keyInputRef$current===void 0?void 0:_keyInputRef$current.value)||encryptionKey).trim();console.log('Using encryption key:',key?'*** (key present)':'No key provided');// Encrypt the file\nconsole.log('Encrypting file:',selectedFile.name);const encryptedData=await encryptFile(selectedFile,key);if(!encryptedData||!encryptedData.encryptedData){throw new Error('Failed to encrypt file: No encrypted data returned');}console.log('File encrypted successfully');// Call the parent's modify handler\nconsole.log('Calling onModify handler...');await onModify(selectedFile,encryptedData,key);// Reset form\nconsole.log('Resetting form...');setSelectedFile(null);setEncryptionKey('');setIsKeyValid(null);if(fileInputRef.current){fileInputRef.current.value='';}if(keyInputRef.current){keyInputRef.current.value='';}console.log('File modification completed successfully');toast.success('File modified successfully!');}catch(err){console.error('Error encrypting file:',err);const errorMessage=err instanceof Error?err.message:'Failed to encrypt file. Please try again.';setError(errorMessage);toast.error(errorMessage);}finally{setIsEncrypting(false);}};const getFileIcon=()=>{if(!selectedFile)return/*#__PURE__*/_jsx(File,{className:\"w-6 h-6\"});if(selectedFile.type==='application/pdf'){return/*#__PURE__*/_jsx(FileText,{className:\"w-6 h-6 text-red-500\"});}if(selectedFile.type.startsWith('image/')){return/*#__PURE__*/_jsx(ImageIcon,{className:\"w-6 h-6 text-blue-500\"});}if(selectedFile.type==='application/vnd.openxmlformats-officedocument.presentationml.presentation'){return/*#__PURE__*/_jsx(FileText,{className:\"w-6 h-6 text-orange-500\"});// PPTX\n}if(selectedFile.type==='application/vnd.openxmlformats-officedocument.wordprocessingml.document'){return/*#__PURE__*/_jsx(FileText,{className:\"w-6 h-6 text-blue-600\"});// DOCX\n}if(selectedFile.type==='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'||selectedFile.type==='application/vnd.ms-excel'){return/*#__PURE__*/_jsx(FileText,{className:\"w-6 h-6 text-green-500\"});// XLSX/XLS\n}if(selectedFile.type==='text/plain'){return/*#__PURE__*/_jsx(FileText,{className:\"w-6 h-6 text-gray-500\"});// TXT\n}return/*#__PURE__*/_jsx(File,{className:\"w-6 h-6\"});};return/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-dark-800 p-6 rounded-lg shadow-md border border-dark-700 glass fade-in\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4 flex items-center text-white\",children:[/*#__PURE__*/_jsx(Edit,{className:\"w-5 h-5 mr-2\"}),\"Modify File: \",file.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-dark-700 rounded border border-dark-600\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-dark-300 mb-1\",children:\"Current File:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-white\",children:file.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-dark-400\",children:[\"Type: \",getFileTypeName(file.type),\" \\u2022 Size: \",(file.size/1024/1024).toFixed(2),\" MB\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-yellow-400 mt-2\",children:\"\\u26A0\\uFE0F The new file must have the same name and type\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-white mb-2\",children:\"Select Replacement File\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dark-600 border-dashed rounded-md card-hover\",children:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1 text-center\",children:selectedFile?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-2 bg-dark-700 rounded border border-dark-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[getFileIcon(),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-sm text-white truncate max-w-xs\",children:selectedFile.name})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setSelectedFile(null),className:\"text-dark-400 hover:text-white\",children:/*#__PURE__*/_jsx(X,{className:\"w-4 h-4\"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(Edit,{className:\"mx-auto h-12 w-12 text-dark-400\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex text-sm text-dark-300\",children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"file-modify\",className:\"relative cursor-pointer bg-dark-700 rounded-md font-medium text-primary-400 hover:text-primary-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Select replacement file\"}),/*#__PURE__*/_jsx(\"input\",{id:\"file-modify\",name:\"file-modify\",type:\"file\",className:\"sr-only\",onChange:handleFileChange,ref:fileInputRef,accept:file.type==='application/pdf'?'.pdf':file.type==='application/vnd.openxmlformats-officedocument.presentationml.presentation'?'.pptx':file.type==='application/vnd.openxmlformats-officedocument.wordprocessingml.document'?'.docx':file.type==='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'?'.xlsx':file.type==='application/vnd.ms-excel'?'.xls':file.type==='text/plain'?'.txt':'.jpg,.jpeg,.png,.gif'})]})}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-dark-400\",children:[\"Must be a \",getFileTypeName(file.type),\" file with the same name: \\\"\",file.name,\"\\\"\"]})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-1\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"encryptionKey\",className:\"block text-sm font-medium text-white\",children:\"Encryption Key\"}),getEncryptionKey&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>{const key=getEncryptionKey();if(key){setEncryptionKey(key);setIsKeyValid(true);copyToClipboard(key);}},className:\"text-xs text-primary-400 hover:text-primary-300 flex items-center\",title:\"Copy your encryption key\",children:[isCopied?/*#__PURE__*/_jsx(Check,{className:\"w-3.5 h-3.5 mr-1\"}):/*#__PURE__*/_jsx(Copy,{className:\"w-3.5 h-3.5 mr-1\"}),isCopied?'Copied!':'Copy Key']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"encryptionKey\",ref:keyInputRef,value:undefined,onChange:handleEncryptionKeyChange,className:\"input \".concat(isKeyValid===false?'border-red-500':''),placeholder:\"Enter your encryption key\",required:true}),isKeyValid===false&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-400\",children:\"Invalid encryption key. Key must be at least 16 characters long.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-xs text-dark-400\",children:\"This key will be used to encrypt the replacement file. Keep it safe as it's required for decryption.\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 text-sm text-red-400\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onCancel,disabled:isEncrypting||isModifying,className:\"btn-secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!selectedFile||!encryptionKey||isEncrypting||isModifying,className:\"btn-primary \".concat(!selectedFile||!encryptionKey||isEncrypting||isModifying?'opacity-50 cursor-not-allowed':''),children:isEncrypting?'Encrypting...':isModifying?'Modifying...':'Encrypt & Modify'})]})]})});};export default FileModify;","map":{"version":3,"names":["React","useState","useRef","Edit","X","FileText","Image","ImageIcon","File","Copy","Check","encryptFile","useWallet","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FileModify","_ref","file","onModify","onCancel","isModifying","selectedFile","setSelectedFile","encryptionKey","setEncryptionKey","isEncrypting","setIsEncrypting","error","setError","showKeyWarning","setShowKeyWarning","isKeyValid","setIsKeyValid","isCopied","setIsCopied","fileInputRef","keyInputRef","getEncryptionKey","validateEncryptionKey","validateKey","getFileTypeName","mimeType","_mimeType$split$pop","startsWith","ext","split","toUpperCase","pop","key","handleFileChange","e","_e$target$files","newFile","target","files","name","concat","current","value","type","validTypes","includes","handleEncryptionKeyChange","length","isValid","copyToClipboard","text","navigator","clipboard","writeText","success","setTimeout","err","console","handleSubmit","preventDefault","log","errorMsg","_keyInputRef$current","trim","encryptedData","Error","errorMessage","message","getFileIcon","className","onSubmit","children","size","toFixed","onClick","htmlFor","id","onChange","ref","accept","title","undefined","placeholder","required","disabled"],"sources":["F:/Final Year Project/Project Implementation/BSCIAM-Experimental/frontend/src/components/files/FileModify.tsx"],"sourcesContent":["import React, { useState, useRef, ChangeEvent, FormEvent } from 'react';\r\nimport { Edit, X, FileText, Image as ImageIcon, File, Copy, Check } from 'lucide-react';\r\nimport { encryptFile } from '../../utils/cryptoUtils';\r\nimport { useWallet } from '../../context/WalletContext';\r\nimport { toast } from 'react-hot-toast';\r\nimport { StoredFile } from '../../types';\r\n\r\ninterface FileModifyProps {\r\n  file: StoredFile;\r\n  onModify: (file: File, encryptedData: any, key: string) => Promise<StoredFile | void>;\r\n  onCancel: () => void;\r\n  isModifying: boolean;\r\n}\r\n\r\nconst FileModify: React.FC<FileModifyProps> = ({ file, onModify, onCancel, isModifying }) => {\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n  const [encryptionKey, setEncryptionKey] = useState('');\r\n  const [isEncrypting, setIsEncrypting] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [showKeyWarning, setShowKeyWarning] = useState(false);\r\n  const [isKeyValid, setIsKeyValid] = useState<boolean | null>(null);\r\n  const [isCopied, setIsCopied] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const keyInputRef = useRef<HTMLInputElement>(null);\r\n  const { getEncryptionKey, validateEncryptionKey: validateKey } = useWallet();\r\n  \r\n  // Helper function to convert MIME type to user-friendly name\r\n  const getFileTypeName = (mimeType: string): string => {\r\n    if (mimeType === 'application/pdf') return 'PDF';\r\n    if (mimeType.startsWith('image/')) {\r\n      const ext = mimeType.split('/')[1].toUpperCase();\r\n      return ext === 'JPEG' ? 'JPG' : ext;\r\n    }\r\n    if (mimeType === 'application/vnd.openxmlformats-officedocument.presentationml.presentation') return 'PPTX';\r\n    if (mimeType === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') return 'DOCX';\r\n    if (mimeType === 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet') return 'XLSX';\r\n    if (mimeType === 'application/vnd.ms-excel') return 'XLS';\r\n    if (mimeType === 'text/plain') return 'TXT';\r\n    // Extract extension from MIME type or return a simplified version\r\n    return mimeType.split('/').pop()?.toUpperCase() || 'File';\r\n  };\r\n  \r\n  // Local encryption key validation function\r\n  const validateEncryptionKey = (key: string): boolean => {\r\n    if (!key) return false;\r\n    // Require exact match to stored key; keys are 32-byte hex (64 chars)\r\n    return (validateKey ? validateKey(key) : false);\r\n  };\r\n\r\n  const handleFileChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const newFile = e.target.files?.[0];\r\n    if (!newFile) return;\r\n\r\n    // Validate file name matches the existing file\r\n    if (newFile.name !== file.name) {\r\n      setError(`File name must match the existing file. Expected: ${file.name}, Got: ${newFile.name}`);\r\n      setSelectedFile(null);\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Validate file type matches the existing file\r\n    if (newFile.type !== file.type) {\r\n      setError(`File type must match the existing file. Expected: ${file.type}, Got: ${newFile.type}`);\r\n      setSelectedFile(null);\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Allow PDF, images, Office documents, and text files\r\n    const validTypes = [\r\n      'application/pdf',\r\n      'image/jpeg',\r\n      'image/png',\r\n      'image/gif',\r\n      'application/vnd.openxmlformats-officedocument.presentationml.presentation', // PPTX\r\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document', // DOCX\r\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', // XLSX\r\n      'application/vnd.ms-excel', // XLS\r\n      'text/plain' // TXT\r\n    ];\r\n    if (!validTypes.includes(newFile.type)) {\r\n      setError('Only PDF, images, Office documents (PPTX, DOCX, XLSX), and text files are allowed');\r\n      setSelectedFile(null);\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n      return;\r\n    }\r\n\r\n    setSelectedFile(newFile);\r\n    setError(null);\r\n  };\r\n\r\n  const handleEncryptionKeyChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const key = e.target.value;\r\n    setEncryptionKey(key);\r\n    setShowKeyWarning(key.length > 0);\r\n    \r\n    // Validate key format (if needed)\r\n    if (key.length > 0) {\r\n      const isValid = validateEncryptionKey ? validateEncryptionKey(key) : false;\r\n      setIsKeyValid(isValid);\r\n    } else {\r\n      setIsKeyValid(null);\r\n    }\r\n  };\r\n\r\n  const copyToClipboard = async (text: string) => {\r\n    try {\r\n      await navigator.clipboard.writeText(text);\r\n      setIsCopied(true);\r\n      toast.success('Encryption key copied to clipboard!');\r\n      setTimeout(() => setIsCopied(false), 2000);\r\n    } catch (err) {\r\n      console.error('Failed to copy text:', err);\r\n      toast.error('Failed to copy key');\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: FormEvent) => {\r\n    e.preventDefault();\r\n    console.log('Modify submit button clicked');\r\n    \r\n    if (!selectedFile) {\r\n      const errorMsg = 'Please select a file to replace the existing one';\r\n      console.error(errorMsg);\r\n      setError(errorMsg);\r\n      return;\r\n    }\r\n    \r\n    if (!encryptionKey) {\r\n      const errorMsg = 'Please enter your encryption key';\r\n      console.error(errorMsg);\r\n      setError(errorMsg);\r\n      return;\r\n    }\r\n    \r\n    // Validate encryption key before proceeding\r\n    if (!validateEncryptionKey(encryptionKey)) {\r\n      const errorMsg = 'Invalid encryption key. It must match your registered key.';\r\n      console.error(errorMsg);\r\n      setError(errorMsg);\r\n      return;\r\n    }\r\n\r\n    // Validate file name matches\r\n    if (selectedFile.name !== file.name) {\r\n      const errorMsg = `File name must match the existing file. Expected: ${file.name}, Got: ${selectedFile.name}`;\r\n      console.error(errorMsg);\r\n      setError(errorMsg);\r\n      return;\r\n    }\r\n\r\n    // Validate file type matches\r\n    if (selectedFile.type !== file.type) {\r\n      const errorMsg = `File type must match the existing file. Expected: ${file.type}, Got: ${selectedFile.type}`;\r\n      console.error(errorMsg);\r\n      setError(errorMsg);\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      console.log('Starting file encryption for modification...');\r\n      setIsEncrypting(true);\r\n      setError(null);\r\n      \r\n      // Get or use the provided encryption key\r\n      const key = (keyInputRef.current?.value || encryptionKey).trim();\r\n      console.log('Using encryption key:', key ? '*** (key present)' : 'No key provided');\r\n      \r\n      // Encrypt the file\r\n      console.log('Encrypting file:', selectedFile.name);\r\n      const encryptedData = await encryptFile(selectedFile, key);\r\n      \r\n      if (!encryptedData || !encryptedData.encryptedData) {\r\n        throw new Error('Failed to encrypt file: No encrypted data returned');\r\n      }\r\n      console.log('File encrypted successfully');\r\n      \r\n      // Call the parent's modify handler\r\n      console.log('Calling onModify handler...');\r\n      await onModify(selectedFile, encryptedData, key);\r\n      \r\n      // Reset form\r\n      console.log('Resetting form...');\r\n      setSelectedFile(null);\r\n      setEncryptionKey('');\r\n      setIsKeyValid(null);\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n      if (keyInputRef.current) {\r\n        keyInputRef.current.value = '';\r\n      }\r\n      \r\n      console.log('File modification completed successfully');\r\n      toast.success('File modified successfully!');\r\n    } catch (err) {\r\n      console.error('Error encrypting file:', err);\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to encrypt file. Please try again.';\r\n      setError(errorMessage);\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setIsEncrypting(false);\r\n    }\r\n  };\r\n\r\n  const getFileIcon = () => {\r\n    if (!selectedFile) return <File className=\"w-6 h-6\" />;\r\n    \r\n    if (selectedFile.type === 'application/pdf') {\r\n      return <FileText className=\"w-6 h-6 text-red-500\" />;\r\n    }\r\n    \r\n    if (selectedFile.type.startsWith('image/')) {\r\n      return <ImageIcon className=\"w-6 h-6 text-blue-500\" />;\r\n    }\r\n    \r\n    if (selectedFile.type === 'application/vnd.openxmlformats-officedocument.presentationml.presentation') {\r\n      return <FileText className=\"w-6 h-6 text-orange-500\" />; // PPTX\r\n    }\r\n    \r\n    if (selectedFile.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {\r\n      return <FileText className=\"w-6 h-6 text-blue-600\" />; // DOCX\r\n    }\r\n    \r\n    if (selectedFile.type === 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' || \r\n        selectedFile.type === 'application/vnd.ms-excel') {\r\n      return <FileText className=\"w-6 h-6 text-green-500\" />; // XLSX/XLS\r\n    }\r\n    \r\n    if (selectedFile.type === 'text/plain') {\r\n      return <FileText className=\"w-6 h-6 text-gray-500\" />; // TXT\r\n    }\r\n    \r\n    return <File className=\"w-6 h-6\" />;\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n    <div className=\"bg-dark-800 p-6 rounded-lg shadow-md border border-dark-700 glass fade-in\">\r\n      <h3 className=\"text-lg font-semibold mb-4 flex items-center text-white\">\r\n        <Edit className=\"w-5 h-5 mr-2\" />\r\n        Modify File: {file.name}\r\n      </h3>\r\n      \r\n      <div className=\"mb-4 p-3 bg-dark-700 rounded border border-dark-600\">\r\n        <p className=\"text-sm text-dark-300 mb-1\">Current File:</p>\r\n        <p className=\"text-sm font-medium text-white\">{file.name}</p>\r\n        <p className=\"text-xs text-dark-400\">Type: {getFileTypeName(file.type)} • Size: {(file.size / 1024 / 1024).toFixed(2)} MB</p>\r\n        <p className=\"text-xs text-yellow-400 mt-2\">⚠️ The new file must have the same name and type</p>\r\n      </div>\r\n      \r\n      <div className=\"mb-4\">\r\n        <label className=\"block text-sm font-medium text-white mb-2\">\r\n          Select Replacement File\r\n        </label>\r\n        <div className=\"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dark-600 border-dashed rounded-md card-hover\">\r\n          <div className=\"space-y-1 text-center\">\r\n            {selectedFile ? (\r\n              <div className=\"flex items-center justify-between p-2 bg-dark-700 rounded border border-dark-600\">\r\n                <div className=\"flex items-center\">\r\n                  {getFileIcon()}\r\n                  <span className=\"ml-2 text-sm text-white truncate max-w-xs\">\r\n                    {selectedFile.name}\r\n                  </span>\r\n                </div>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setSelectedFile(null)}\r\n                  className=\"text-dark-400 hover:text-white\"\r\n                >\r\n                  <X className=\"w-4 h-4\" />\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <>\r\n                <div className=\"flex justify-center\">\r\n                  <Edit className=\"mx-auto h-12 w-12 text-dark-400\" />\r\n                </div>\r\n                <div className=\"flex text-sm text-dark-300\">\r\n                  <label\r\n                    htmlFor=\"file-modify\"\r\n                    className=\"relative cursor-pointer bg-dark-700 rounded-md font-medium text-primary-400 hover:text-primary-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500\"\r\n                  >\r\n                    <span>Select replacement file</span>\r\n                    <input\r\n                      id=\"file-modify\"\r\n                      name=\"file-modify\"\r\n                      type=\"file\"\r\n                      className=\"sr-only\"\r\n                      onChange={handleFileChange}\r\n                      ref={fileInputRef}\r\n                      accept={file.type === 'application/pdf' ? '.pdf' : \r\n                              file.type === 'application/vnd.openxmlformats-officedocument.presentationml.presentation' ? '.pptx' :\r\n                              file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' ? '.docx' :\r\n                              file.type === 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' ? '.xlsx' :\r\n                              file.type === 'application/vnd.ms-excel' ? '.xls' :\r\n                              file.type === 'text/plain' ? '.txt' :\r\n                              '.jpg,.jpeg,.png,.gif'}\r\n                    />\r\n                  </label>\r\n                </div>\r\n                <p className=\"text-xs text-dark-400\">\r\n                  Must be a {getFileTypeName(file.type)} file with the same name: \"{file.name}\"\r\n                </p>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"mb-4\">\r\n        <div className=\"flex justify-between items-center mb-1\">\r\n          <label htmlFor=\"encryptionKey\" className=\"block text-sm font-medium text-white\">\r\n            Encryption Key\r\n          </label>\r\n          {getEncryptionKey && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                const key = getEncryptionKey();\r\n                if (key) {\r\n                  setEncryptionKey(key);\r\n                  setIsKeyValid(true);\r\n                  copyToClipboard(key);\r\n                }\r\n              }}\r\n              className=\"text-xs text-primary-400 hover:text-primary-300 flex items-center\"\r\n              title=\"Copy your encryption key\"\r\n            >\r\n              {isCopied ? (\r\n                <Check className=\"w-3.5 h-3.5 mr-1\" />\r\n              ) : (\r\n                <Copy className=\"w-3.5 h-3.5 mr-1\" />\r\n              )}\r\n              {isCopied ? 'Copied!' : 'Copy Key'}\r\n            </button>\r\n          )}\r\n        </div>\r\n        <div className=\"relative\">\r\n          <input\r\n            type=\"password\"\r\n            id=\"encryptionKey\"\r\n            ref={keyInputRef}\r\n            value={undefined as any}\r\n            onChange={handleEncryptionKeyChange}\r\n            className={`input ${\r\n              isKeyValid === false ? 'border-red-500' : ''\r\n            }`}\r\n            placeholder=\"Enter your encryption key\"\r\n            required\r\n          />\r\n          {isKeyValid === false && (\r\n            <p className=\"mt-1 text-sm text-red-400\">Invalid encryption key. Key must be at least 16 characters long.</p>\r\n          )}\r\n          <p className=\"mt-1 text-xs text-dark-400\">\r\n            This key will be used to encrypt the replacement file. Keep it safe as it's required for decryption.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className=\"mb-4 text-sm text-red-400\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex justify-end space-x-2\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={onCancel}\r\n          disabled={isEncrypting || isModifying}\r\n          className=\"btn-secondary\"\r\n        >\r\n          Cancel\r\n        </button>\r\n        <button\r\n          type=\"submit\"\r\n          disabled={!selectedFile || !encryptionKey || isEncrypting || isModifying}\r\n          className={`btn-primary ${\r\n            !selectedFile || !encryptionKey || isEncrypting || isModifying\r\n              ? 'opacity-50 cursor-not-allowed'\r\n              : ''\r\n          }`}\r\n        >\r\n          {isEncrypting ? 'Encrypting...' : isModifying ? 'Modifying...' : 'Encrypt & Modify'}\r\n        </button>\r\n      </div>\r\n    </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default FileModify;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}