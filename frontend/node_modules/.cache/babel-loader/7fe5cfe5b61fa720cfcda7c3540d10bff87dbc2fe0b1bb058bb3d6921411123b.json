{"ast":null,"code":"const API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:3001/api';class FileApiError extends Error{constructor(message,status,response){super(message);this.status=status;this.response=response;this.name='FileApiError';}}/**\r\n * File API service for communicating with the backend server\r\n */export const fileApi={/**\r\n   * Upload an encrypted file to the server\r\n   */async uploadFile(data){try{const response=await fetch(\"\".concat(API_BASE_URL,\"/files/upload\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new FileApiError(errorData.error||'Failed to upload file',response.status,errorData);}return await response.json();}catch(error){if(error instanceof FileApiError){throw error;}throw new FileApiError(\"Network error: \".concat(error instanceof Error?error.message:'Unknown error'));}},/**\r\n   * Get all files for a wallet address (metadata only)\r\n   */async getFiles(walletAddress){try{const response=await fetch(\"\".concat(API_BASE_URL,\"/files?walletAddress=\").concat(encodeURIComponent(walletAddress)),{method:'GET',headers:{'Content-Type':'application/json'}});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new FileApiError(errorData.error||'Failed to fetch files',response.status,errorData);}return await response.json();}catch(error){if(error instanceof FileApiError){throw error;}throw new FileApiError(\"Network error: \".concat(error instanceof Error?error.message:'Unknown error'));}},/**\r\n   * Get encrypted file content by file ID\r\n   */async getEncryptedFile(fileId,walletAddress){try{const response=await fetch(\"\".concat(API_BASE_URL,\"/files/\").concat(fileId,\"/encrypted?walletAddress=\").concat(encodeURIComponent(walletAddress)),{method:'GET',headers:{'Content-Type':'application/json'}});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new FileApiError(errorData.error||'Failed to fetch encrypted file',response.status,errorData);}return await response.json();}catch(error){if(error instanceof FileApiError){throw error;}throw new FileApiError(\"Network error: \".concat(error instanceof Error?error.message:'Unknown error'));}},/**\r\n   * Update/modify an existing file\r\n   */async updateFile(fileId,encryptedData,metadata,walletAddress){try{const response=await fetch(\"\".concat(API_BASE_URL,\"/files/\").concat(fileId),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({encryptedData,metadata,walletAddress})});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new FileApiError(errorData.error||'Failed to update file',response.status,errorData);}return await response.json();}catch(error){if(error instanceof FileApiError){throw error;}throw new FileApiError(\"Network error: \".concat(error instanceof Error?error.message:'Unknown error'));}},/**\r\n   * Delete a file\r\n   */async deleteFile(fileId,walletAddress){try{const response=await fetch(\"\".concat(API_BASE_URL,\"/files/\").concat(fileId,\"?walletAddress=\").concat(encodeURIComponent(walletAddress)),{method:'DELETE',headers:{'Content-Type':'application/json'}});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new FileApiError(errorData.error||'Failed to delete file',response.status,errorData);}return await response.json();}catch(error){if(error instanceof FileApiError){throw error;}throw new FileApiError(\"Network error: \".concat(error instanceof Error?error.message:'Unknown error'));}}};","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","FileApiError","Error","constructor","message","status","response","name","fileApi","uploadFile","data","fetch","concat","method","headers","body","JSON","stringify","ok","errorData","json","catch","error","getFiles","walletAddress","encodeURIComponent","getEncryptedFile","fileId","updateFile","encryptedData","metadata","deleteFile"],"sources":["F:/Final Year Project/Project Implementation/BSCIAM-Experimental/frontend/src/services/fileApi.ts"],"sourcesContent":["const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\r\n\r\nexport interface UploadFileRequest {\r\n  fileId: string;\r\n  encryptedData: string;\r\n  metadata: {\r\n    name: string;\r\n    type: string;\r\n    size: number;\r\n    lastModified: number;\r\n    originalName?: string;\r\n    mimeType?: string;\r\n  };\r\n  walletAddress: string;\r\n}\r\n\r\nexport interface StoredFile {\r\n  id: string;\r\n  name: string;\r\n  type: string;\r\n  size: number;\r\n  uploadedAt: string;\r\n  encryptedData: string;\r\n  metadata: {\r\n    name: string;\r\n    originalName: string;\r\n    type: string;\r\n    mimeType: string;\r\n    size: number;\r\n    lastModified: number;\r\n  };\r\n}\r\n\r\nexport interface EncryptedFileResponse {\r\n  encryptedData: string;\r\n}\r\n\r\nclass FileApiError extends Error {\r\n  constructor(\r\n    message: string,\r\n    public status?: number,\r\n    public response?: any\r\n  ) {\r\n    super(message);\r\n    this.name = 'FileApiError';\r\n  }\r\n}\r\n\r\n/**\r\n * File API service for communicating with the backend server\r\n */\r\nexport const fileApi = {\r\n  /**\r\n   * Upload an encrypted file to the server\r\n   */\r\n  async uploadFile(data: UploadFileRequest): Promise<{ fileId: string }> {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/files/upload`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(data),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        throw new FileApiError(\r\n          errorData.error || 'Failed to upload file',\r\n          response.status,\r\n          errorData\r\n        );\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n      if (error instanceof FileApiError) {\r\n        throw error;\r\n      }\r\n      throw new FileApiError(\r\n        `Network error: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      );\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get all files for a wallet address (metadata only)\r\n   */\r\n  async getFiles(walletAddress: string): Promise<StoredFile[]> {\r\n    try {\r\n      const response = await fetch(\r\n        `${API_BASE_URL}/files?walletAddress=${encodeURIComponent(walletAddress)}`,\r\n        {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        throw new FileApiError(\r\n          errorData.error || 'Failed to fetch files',\r\n          response.status,\r\n          errorData\r\n        );\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n      if (error instanceof FileApiError) {\r\n        throw error;\r\n      }\r\n      throw new FileApiError(\r\n        `Network error: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      );\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get encrypted file content by file ID\r\n   */\r\n  async getEncryptedFile(\r\n    fileId: string,\r\n    walletAddress: string\r\n  ): Promise<EncryptedFileResponse> {\r\n    try {\r\n      const response = await fetch(\r\n        `${API_BASE_URL}/files/${fileId}/encrypted?walletAddress=${encodeURIComponent(walletAddress)}`,\r\n        {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        throw new FileApiError(\r\n          errorData.error || 'Failed to fetch encrypted file',\r\n          response.status,\r\n          errorData\r\n        );\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n      if (error instanceof FileApiError) {\r\n        throw error;\r\n      }\r\n      throw new FileApiError(\r\n        `Network error: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      );\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Update/modify an existing file\r\n   */\r\n  async updateFile(\r\n    fileId: string,\r\n    encryptedData: string,\r\n    metadata: any,\r\n    walletAddress: string\r\n  ): Promise<void> {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/files/${fileId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          encryptedData,\r\n          metadata,\r\n          walletAddress,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        throw new FileApiError(\r\n          errorData.error || 'Failed to update file',\r\n          response.status,\r\n          errorData\r\n        );\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n      if (error instanceof FileApiError) {\r\n        throw error;\r\n      }\r\n      throw new FileApiError(\r\n        `Network error: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      );\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Delete a file\r\n   */\r\n  async deleteFile(fileId: string, walletAddress: string): Promise<void> {\r\n    try {\r\n      const response = await fetch(\r\n        `${API_BASE_URL}/files/${fileId}?walletAddress=${encodeURIComponent(walletAddress)}`,\r\n        {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        throw new FileApiError(\r\n          errorData.error || 'Failed to delete file',\r\n          response.status,\r\n          errorData\r\n        );\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n      if (error instanceof FileApiError) {\r\n        throw error;\r\n      }\r\n      throw new FileApiError(\r\n        `Network error: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      );\r\n    }\r\n  },\r\n};\r\n\r\n"],"mappings":"AAAA,KAAM,CAAAA,YAAY,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,2BAA2B,CAqCjF,KAAM,CAAAC,YAAY,QAAS,CAAAC,KAAM,CAC/BC,WAAWA,CACTC,OAAe,CACRC,MAAe,CACfC,QAAc,CACrB,CACA,KAAK,CAACF,OAAO,CAAC,CAAC,KAHRC,MAAe,CAAfA,MAAe,MACfC,QAAc,CAAdA,QAAc,CAGrB,IAAI,CAACC,IAAI,CAAG,cAAc,CAC5B,CACF,CAEA;AACA;AACA,GACA,MAAO,MAAM,CAAAC,OAAO,CAAG,CACrB;AACF;AACA,KACE,KAAM,CAAAC,UAAUA,CAACC,IAAuB,CAA+B,CACrE,GAAI,CACF,KAAM,CAAAJ,QAAQ,CAAG,KAAM,CAAAK,KAAK,IAAAC,MAAA,CAAIf,YAAY,kBAAiB,CAC3DgB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACP,IAAI,CAC3B,CAAC,CAAC,CAEF,GAAI,CAACJ,QAAQ,CAACY,EAAE,CAAE,CAChB,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAb,QAAQ,CAACc,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,KAAO,CAAC,CAAC,CAAC,CAAC,CACzD,KAAM,IAAI,CAAApB,YAAY,CACpBkB,SAAS,CAACG,KAAK,EAAI,uBAAuB,CAC1ChB,QAAQ,CAACD,MAAM,CACfc,SACF,CAAC,CACH,CAEA,MAAO,MAAM,CAAAb,QAAQ,CAACc,IAAI,CAAC,CAAC,CAC9B,CAAE,MAAOE,KAAK,CAAE,CACd,GAAIA,KAAK,WAAY,CAAArB,YAAY,CAAE,CACjC,KAAM,CAAAqB,KAAK,CACb,CACA,KAAM,IAAI,CAAArB,YAAY,mBAAAW,MAAA,CACFU,KAAK,WAAY,CAAApB,KAAK,CAAGoB,KAAK,CAAClB,OAAO,CAAG,eAAe,CAC5E,CAAC,CACH,CACF,CAAC,CAED;AACF;AACA,KACE,KAAM,CAAAmB,QAAQA,CAACC,aAAqB,CAAyB,CAC3D,GAAI,CACF,KAAM,CAAAlB,QAAQ,CAAG,KAAM,CAAAK,KAAK,IAAAC,MAAA,CACvBf,YAAY,0BAAAe,MAAA,CAAwBa,kBAAkB,CAACD,aAAa,CAAC,EACxE,CACEX,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CACF,CAAC,CAED,GAAI,CAACR,QAAQ,CAACY,EAAE,CAAE,CAChB,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAb,QAAQ,CAACc,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,KAAO,CAAC,CAAC,CAAC,CAAC,CACzD,KAAM,IAAI,CAAApB,YAAY,CACpBkB,SAAS,CAACG,KAAK,EAAI,uBAAuB,CAC1ChB,QAAQ,CAACD,MAAM,CACfc,SACF,CAAC,CACH,CAEA,MAAO,MAAM,CAAAb,QAAQ,CAACc,IAAI,CAAC,CAAC,CAC9B,CAAE,MAAOE,KAAK,CAAE,CACd,GAAIA,KAAK,WAAY,CAAArB,YAAY,CAAE,CACjC,KAAM,CAAAqB,KAAK,CACb,CACA,KAAM,IAAI,CAAArB,YAAY,mBAAAW,MAAA,CACFU,KAAK,WAAY,CAAApB,KAAK,CAAGoB,KAAK,CAAClB,OAAO,CAAG,eAAe,CAC5E,CAAC,CACH,CACF,CAAC,CAED;AACF;AACA,KACE,KAAM,CAAAsB,gBAAgBA,CACpBC,MAAc,CACdH,aAAqB,CACW,CAChC,GAAI,CACF,KAAM,CAAAlB,QAAQ,CAAG,KAAM,CAAAK,KAAK,IAAAC,MAAA,CACvBf,YAAY,YAAAe,MAAA,CAAUe,MAAM,8BAAAf,MAAA,CAA4Ba,kBAAkB,CAACD,aAAa,CAAC,EAC5F,CACEX,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CACF,CAAC,CAED,GAAI,CAACR,QAAQ,CAACY,EAAE,CAAE,CAChB,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAb,QAAQ,CAACc,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,KAAO,CAAC,CAAC,CAAC,CAAC,CACzD,KAAM,IAAI,CAAApB,YAAY,CACpBkB,SAAS,CAACG,KAAK,EAAI,gCAAgC,CACnDhB,QAAQ,CAACD,MAAM,CACfc,SACF,CAAC,CACH,CAEA,MAAO,MAAM,CAAAb,QAAQ,CAACc,IAAI,CAAC,CAAC,CAC9B,CAAE,MAAOE,KAAK,CAAE,CACd,GAAIA,KAAK,WAAY,CAAArB,YAAY,CAAE,CACjC,KAAM,CAAAqB,KAAK,CACb,CACA,KAAM,IAAI,CAAArB,YAAY,mBAAAW,MAAA,CACFU,KAAK,WAAY,CAAApB,KAAK,CAAGoB,KAAK,CAAClB,OAAO,CAAG,eAAe,CAC5E,CAAC,CACH,CACF,CAAC,CAED;AACF;AACA,KACE,KAAM,CAAAwB,UAAUA,CACdD,MAAc,CACdE,aAAqB,CACrBC,QAAa,CACbN,aAAqB,CACN,CACf,GAAI,CACF,KAAM,CAAAlB,QAAQ,CAAG,KAAM,CAAAK,KAAK,IAAAC,MAAA,CAAIf,YAAY,YAAAe,MAAA,CAAUe,MAAM,EAAI,CAC9Dd,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBY,aAAa,CACbC,QAAQ,CACRN,aACF,CAAC,CACH,CAAC,CAAC,CAEF,GAAI,CAAClB,QAAQ,CAACY,EAAE,CAAE,CAChB,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAb,QAAQ,CAACc,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,KAAO,CAAC,CAAC,CAAC,CAAC,CACzD,KAAM,IAAI,CAAApB,YAAY,CACpBkB,SAAS,CAACG,KAAK,EAAI,uBAAuB,CAC1ChB,QAAQ,CAACD,MAAM,CACfc,SACF,CAAC,CACH,CAEA,MAAO,MAAM,CAAAb,QAAQ,CAACc,IAAI,CAAC,CAAC,CAC9B,CAAE,MAAOE,KAAK,CAAE,CACd,GAAIA,KAAK,WAAY,CAAArB,YAAY,CAAE,CACjC,KAAM,CAAAqB,KAAK,CACb,CACA,KAAM,IAAI,CAAArB,YAAY,mBAAAW,MAAA,CACFU,KAAK,WAAY,CAAApB,KAAK,CAAGoB,KAAK,CAAClB,OAAO,CAAG,eAAe,CAC5E,CAAC,CACH,CACF,CAAC,CAED;AACF;AACA,KACE,KAAM,CAAA2B,UAAUA,CAACJ,MAAc,CAAEH,aAAqB,CAAiB,CACrE,GAAI,CACF,KAAM,CAAAlB,QAAQ,CAAG,KAAM,CAAAK,KAAK,IAAAC,MAAA,CACvBf,YAAY,YAAAe,MAAA,CAAUe,MAAM,oBAAAf,MAAA,CAAkBa,kBAAkB,CAACD,aAAa,CAAC,EAClF,CACEX,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CACF,CAAC,CAED,GAAI,CAACR,QAAQ,CAACY,EAAE,CAAE,CAChB,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAb,QAAQ,CAACc,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,KAAO,CAAC,CAAC,CAAC,CAAC,CACzD,KAAM,IAAI,CAAApB,YAAY,CACpBkB,SAAS,CAACG,KAAK,EAAI,uBAAuB,CAC1ChB,QAAQ,CAACD,MAAM,CACfc,SACF,CAAC,CACH,CAEA,MAAO,MAAM,CAAAb,QAAQ,CAACc,IAAI,CAAC,CAAC,CAC9B,CAAE,MAAOE,KAAK,CAAE,CACd,GAAIA,KAAK,WAAY,CAAArB,YAAY,CAAE,CACjC,KAAM,CAAAqB,KAAK,CACb,CACA,KAAM,IAAI,CAAArB,YAAY,mBAAAW,MAAA,CACFU,KAAK,WAAY,CAAApB,KAAK,CAAGoB,KAAK,CAAClB,OAAO,CAAG,eAAe,CAC5E,CAAC,CACH,CACF,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}